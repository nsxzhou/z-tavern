# 互动酒馆后续方向

> 聚焦 AI 角色互动体验，暂不考虑用户体系与长期持久化。

## 1. 角色表现力
- 建立结构化 Persona 配置（背景、口头禅、禁忌、剧情线、情绪曲线）。
- 提供 Prompt 片段管理与在线热更新接口，避免频繁改代码。
- 输出情绪与动作标签，便于前端驱动音效、表情或灯光。

## 2. 记忆与会话状态
- 划分短期记忆（最近对话）与长期记忆（关键事件、玩家偏好）。
- 在 Eino Chain 中加入 Lambda 节点处理记忆读写与系统提示动态调整。
- 引入记忆压缩策略，将长对话提炼为摘要或关键事实。

## 3. 多角色与场景编排
- 支持“一桌多人”，按设定顺序或策略让不同 persona 轮番发言。
- 增加事件脚本/剧情触发器，实现随机 incident、任务发布等玩法。
- 预留 NPC 之间互聊的能力，构建更真实的酒馆氛围。

## 4. 流式与多模态体验
- 丰富 SSE payload，输出 `delta`、`emotion`、`action` 等字段。
- 串联 TTS/音效服务，将文本流转换为语音或环境声提示。
- 设计前端字幕/弹幕式展示协议，提升临场感。

## 5. 工具与插件体系
- 集成酒单查询、骰子/小游戏、知识检索等轻量工具节点。
- 封装工具调用协议，允许运营快速扩展插件。
- 通过 Chain/ToolsNode 控制工具调用频率与兜底回复。

## 6. 运营与调优
- 构建配置面板或 CLI，对角色、Prompt、链路参数进行灰度发布。
- 增加对话质量指标（回复长度、风格一致性、拒答率）与报警。
- 记录链路执行日志，为日后 A/B、效果评估打基础。

## 7. 基础设施补强（不引入账户的前提下）
- 提供轻量存储方案（本地文件/嵌入式 DB）缓存 persona、剧情与记忆。
- 增加可插拔日志与监控接口，便于部署后观测运行状态。
- 明确配置与凭证管理策略（例如本地 `.env`、密钥轮换流程）。
